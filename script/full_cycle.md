# full_cycle.py

## Назначение
Запускает полный цикл обработки данных и генерации отчётов одной командой, последовательно выполняя нормализацию, построение и очистку признаков, обучение моделей, объяснение аномалий, визуализации и SOC-отчёт.

## Основные функции и переменные
- `_prompt_scope()` — интерактивный выбор масштаба отчёта (day/week/month/range/all).
- `_prompt_date()` / `_parse_date()` — ввод и валидация дат в формате `YYYY-MM-DD`.
- `_run()` — запуск подскриптов с выводом выполняемой команды.
- `_window_dates()` / `_filter_dates()` — подготовка списка дат для обучения и отчётов.
- `_run_reports()` — вызов `train_anomaly_models.py`, `explain_anomalies.py`, `visualize_reports.py`, `soc_report.py`.

## Входные данные
- Сырые выгрузки SIEM в `script/data/`.
- Данные для промежуточных расчётов создаются в `script/work/` и `script/features/`.

## Выходные данные
- Суточные CSV и карта пользователей — в `script/work/`.
- Очищенные признаки, аномалии и объяснения — в `script/features/`.
- Графики и SOC-отчёты — в `script/report/`.

## Запуск
```bash
python full_cycle.py
```

Скрипт запросит масштаб отчёта и дату (или диапазон), после чего выполнит все этапы автоматически.
